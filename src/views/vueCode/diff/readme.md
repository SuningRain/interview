<!--
 * @Descripttion:
 * @Author: ZhangYu
 * @Date: 2023-03-24 16:29:57
 * @LastEditors: ZhangYu
 * @LastEditTime: 2023-03-24 22:41:59
-->
#### diff 算法发生的时机
> 数据源更新 -》watch观测到变化 -》vnode更新触发patch =》节点判断相同 -》触发pathnode进行元素内部比较 => 如果节点有children =》进行diff =》重新渲染

#### diff 算法中的key到底有什么用
> - diff 是针对两组vnode进行比较，使能够尽可能多的复用dom
> - key 一定要是唯一且不变的
> - key 有利于精准匹配，避免没必要的性能开销，因为每次不精准匹配都可能导致
>       额外的重新渲染；而且对于静态节点的删除还可能导致错误，比如从头结点删除一个元素
> - key 还有利于在  头头 尾尾 尾头 头尾 匹配不成功的情况下，利用map快速查找旧old
>       时间复杂度 O(n) - O(1)

#### vue3相对于 vue2做了哪些优化
> - 增加patchflags，标识节点如何进行更新
> - 编译时增加静态模板分析，编译生成block tree，基于动态节点指令切割的嵌套区块
>   每个区块内部的节点结构是固定的， 每个区块只需要以一个Array来追踪自身包含的动态节点
>   性能 由与模板整体大小相关提升为  与动态内容的数量相关
> - 事件侦听缓存